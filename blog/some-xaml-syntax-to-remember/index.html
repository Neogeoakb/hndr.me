<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>    Some XAML syntax to remember
</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width">
                    <link rel="stylesheet" href="http://hdra.github.io/hndr.me/theme/css/normalize.css">
        <link href='//fonts.googleapis.com/css?family=Raleway' rel='stylesheet' type='text/css'>
        <link href='//fonts.googleapis.com/css?family=Oswald' rel='stylesheet' type='text/css'>
        <link href='http://fonts.googleapis.com/css?family=PT+Mono' rel='stylesheet' type='text/css'>
        <link rel="stylesheet" href="http://hdra.github.io/hndr.me/theme/css/font-awesome.min.css">
        <link rel="stylesheet" href="http://hdra.github.io/hndr.me/theme/css/main.css">
        
    <link rel="stylesheet" href="http://hdra.github.io/hndr.me/theme/css/blog.css">
    <link rel="stylesheet" href="http://hdra.github.io/hndr.me/theme/css/github.css">
                <link href="http://hdra.github.io/hndr.me/feeds\all.atom.xml" type="application/atom+xml" rel="alternate" title="hndr.me Atom Feed" />
                        <script src="http://hdra.github.io/hndr.me/theme/js/vendor/modernizr-2.6.2.min.js"></script>
    </head>
    <body>
        <!--[if lt IE 7]>
            <p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
        <![endif]-->

        <div id="wrapper">
                <header id="sidebar" class="side-shadow">
    <hgroup id="site-header">
        <a id="site-title" href="http://hdra.github.io/hndr.me"><h1><i class="icon-coffee"></i> hndr.me</h1></a>
        <p id="site-desc"> My blog. Consists of mostly broken english and rubbish </p>
    </hgroup>
    <nav>
        <ul id="nav-links">
                                        <li><a href="http://hdra.github.io/hndr.me/blog">Blog</a></li>
                            <li><a href="http://hdra.github.io/hndr.me/contact">Contact</a></li>
                            <li><a href="http://hdra.github.io/hndr.me/pages/projects">Projects</a></li>
                                </ul>
    </nav>
    <footer id="site-info">
    <p>
        Proudly powered by <a href="http://getpelican.com/" target="pelican">Pelican</a> and <a href="http://python.org/" target="python">Python</a>. Theme by <a href="https://github.com/hdra/pelican-cait" target="github">hndr</a>.
    </p>
    <p>
        Textures by <a href="http://subtlepatterns.com/" target="subtlepatterns">Subtle Pattern</a>. Font Awesome by <a href="http://fortawesome.github.io/Font-Awesome/" target="github">Dave Grandy</a>.
    </p>
</footer></header>
    <div id="post-container">
        <ol id="post-list">
            <li>
                <article class="post-entry">
                    <header class="entry-header">
                        <time class="post-time" datetime="2012-08-14T14:17:00" pubdate>
                            Tue 14 August 2012
                        </time>
                        <a href="http://hdra.github.io/hndr.me/blog/some-xaml-syntax-to-remember" rel="bookmark"><h1>Some XAML syntax to remember</h1></a>
                    </header>

                    <section class="post-content">
                        <p>After developing for WPF/ Silverlight for a while, most people will be
familiar with using XAML to declare UI elements, but even though I have
been comfortable with XAML for quite a while, I don’t really know what
is going on behind the stage. Reading Programming Windows by Charles
Petzold shed some lights on it for me, so this post is here again so
that I won’t forget.</p>
<p>One important thing I didn't know before is that XAML file more or less is just
another way to express the C# code, and the XAML elements in it are
actually .NET objects, and anything that can be declared in XAML can be
done in C# as well. Most page consists of two files, a <code>.xaml</code> file and a
<code>.xaml.cs</code> file, as the partial keyword in the C# file suggest, the
<code>.xaml.cs</code> file only consist a part of the class declaration. As we can
guess, the rest are declared in the XAML file. If we look at the
<code>obj/Debug</code> folder of the Project, we can see there are several files with
the name of <code>PageName.g.cs</code> and <code>PageName.g.i.cs</code>. During compile time, the
XAML file is parsed to get the elements and other information declared
in it to generate the intermediate C# file, which will then be compiled
together with our <code>.xaml.cs</code> file to generate the class declaration for a
particular page. In the <code>PageName.g.i.cs</code> file, we can actually see the
declaration for the <code>InitializeComponent</code> method that we always call in
the constructor of our <code>.xaml.cs</code> file. The method basically initiates all
objects declared in the XAML file, which is why if we try to get to
access an element declared in the XAML before the method is called, we
would get a <code>NullReferenceException</code>.</p>
<p>That’s enough for the backstage stuff, lets move on to the syntax. Most
XAML pages looks similar to this:</p>
<div class="highlight"><pre><span class="nt">&lt;Page</span>
    <span class="na">x:Class=</span><span class="s">&quot;App2.MainPage&quot;</span>
    <span class="na">IsTabStop=</span><span class="s">&quot;false&quot;</span>
    <span class="na">xmlns=</span><span class="s">&quot;http://schemas.microsoft.com/winfx/2006/xaml/presentation&quot;</span>
    <span class="na">xmlns:x=</span><span class="s">&quot;http://schemas.microsoft.com/winfx/2006/xaml&quot;</span>
    <span class="na">xmlns:local=</span><span class="s">&quot;using:App2&quot;</span>
    <span class="na">xmlns:d=</span><span class="s">&quot;http://schemas.microsoft.com/expression/blend/2008&quot;</span>
    <span class="na">xmlns:mc=</span><span class="s">&quot;http://schemas.openxmlformats.org/markup-compatibility/2006&quot;</span>
    <span class="na">mc:Ignorable=</span><span class="s">&quot;d&quot;</span><span class="nt">&gt;</span>

    <span class="nt">&lt;Grid</span> <span class="na">Background=</span><span class="s">&quot;{StaticResource ApplicationPageBackgroundThemeBrush}&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;/Grid&gt;</span>

<span class="nt">&lt;/Page&gt;</span>
</pre></div>


<p>As mentioned before, a XAML declaration can be expressed in C#, since
the elements in XAML file are .NET objects. The Page declaration above
basically declare an instance of <code>MainPage</code> in the <code>App2</code> namespace which is
a subclass from the <code>Page</code> class. The <code>xmlns</code> statements are standard xml
namespace inclusion which would allows us to use various elements.
Similarly, with these declaration:</p>
<div class="highlight"><pre><span class="nt">&lt;Page</span>
    <span class="na">x:Class=</span><span class="s">&quot;App2.MainPage&quot;</span>
    <span class="na">IsTabStop=</span><span class="s">&quot;false&quot;</span>
    <span class="na">xmlns=</span><span class="s">&quot;http://schemas.microsoft.com/winfx/2006/xaml/presentation&quot;</span>
    <span class="na">xmlns:x=</span><span class="s">&quot;http://schemas.microsoft.com/winfx/2006/xaml&quot;</span>
    <span class="na">xmlns:local=</span><span class="s">&quot;using:App2&quot;</span>
    <span class="na">xmlns:d=</span><span class="s">&quot;http://schemas.microsoft.com/expression/blend/2008&quot;</span>
    <span class="na">xmlns:mc=</span><span class="s">&quot;http://schemas.openxmlformats.org/markup-compatibility/2006&quot;</span>
    <span class="na">mc:Ignorable=</span><span class="s">&quot;d&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;Grid</span> <span class="na">Background=</span><span class="s">&quot;CadetBlue&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;TextBlock</span> <span class="na">Text=</span><span class="s">&quot;Hello&quot;</span>
            <span class="na">FontSize=</span><span class="s">&quot;96&quot;</span>
            <span class="na">Foreground=</span><span class="s">&quot;BlanchedAlmond&quot;</span>
            <span class="na">HorizontalAlignment=</span><span class="s">&quot;Center&quot;</span>
            <span class="na">VerticalAlignment=</span><span class="s">&quot;Center&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/Grid&gt;</span>
<span class="nt">&lt;/Page&gt;</span>
</pre></div>


<p>The same result can be produced with these C# code:</p>
<div class="highlight"><pre><span class="k">public</span> <span class="k">sealed</span> <span class="k">partial</span> <span class="k">class</span> <span class="nc">MainPage</span> <span class="p">:</span> <span class="n">Page</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="nf">MainPage</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="n">InitializeComponent</span><span class="p">();</span>
        <span class="n">Grid</span> <span class="n">contentGrid</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Grid</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="n">Background</span> <span class="p">=</span> <span class="k">new</span> <span class="n">SolidColorBrush</span><span class="p">(</span><span class="n">Windows</span><span class="p">.</span><span class="n">UI</span><span class="p">.</span><span class="n">Colors</span><span class="p">.</span><span class="n">CadetBlue</span><span class="p">)</span>
        <span class="p">};</span>

        <span class="n">TextBlock</span> <span class="n">txtBlk</span> <span class="p">=</span> <span class="k">new</span> <span class="n">TextBlock</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="n">Text</span> <span class="p">=</span> <span class="s">&quot;Hello&quot;</span><span class="p">,</span>
            <span class="n">FontSize</span> <span class="p">=</span> <span class="m">96</span><span class="p">,</span>
            <span class="n">Foreground</span> <span class="p">=</span> <span class="k">new</span> <span class="n">SolidColorBrush</span><span class="p">(</span><span class="n">Windows</span><span class="p">.</span><span class="n">UI</span><span class="p">.</span><span class="n">Colors</span><span class="p">.</span><span class="n">BlanchedAlmond</span><span class="p">),</span>
            <span class="n">HorizontalAlignment</span> <span class="p">=</span> <span class="n">HorizontalAlignment</span><span class="p">.</span><span class="n">Center</span><span class="p">,</span>
            <span class="n">VerticalAlignment</span> <span class="p">=</span> <span class="n">VerticalAlignment</span><span class="p">.</span><span class="n">Center</span>
        <span class="p">};</span>
        <span class="n">contentGrid</span><span class="p">.</span><span class="n">Children</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="n">txtBlk</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="n">Content</span> <span class="p">=</span> <span class="n">contentGrid</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<p>As we can see, the XAML element properties are just another way to set
the values of the member variables of the objects. As we can see on the
C# code above, the the Foreground property of a TextBlock is of type
<code>SolidColorBrush</code> (or any subclass of the <code>Brush</code> class actually), but in
the XAML syntax, it seems like we are assigning a string to it. This is
because the compiler will parse and assign the appropriate attribute for
us.</p>
<p>The XAML code above shows two ways of setting a property of an XAML
element, namely the usual property attributes syntax, and the other one
is one known as the Property Element syntax. The property-element syntax
can be used to define some more complex attributes such as defining a
gradient background that requires defining more than one colours and
points. For example, the <code>TextBlock</code> above can be defined as such with the
property-element syntax:</p>
<div class="highlight"><pre><span class="nt">&lt;TextBlock&gt;</span>
    <span class="nt">&lt;TextBlock.Foreground&gt;</span>
        <span class="nt">&lt;SolidColorBrush&gt;</span>
            Black
        <span class="nt">&lt;/SolidColorBrush&gt;</span>
    <span class="nt">&lt;/TextBlock.Foreground&gt;</span>
    <span class="nt">&lt;TextBlock.Text&gt;</span>
        Hello
    <span class="nt">&lt;/TextBlock.Text&gt;</span>
    <span class="nt">&lt;TextBlock.FontSize&gt;</span>
        96
    <span class="nt">&lt;/TextBlock.FontSize&gt;</span>
    <span class="nt">&lt;TextBlock.HorizontalAlignment&gt;</span>
        Center
    <span class="nt">&lt;/TextBlock.HorizontalAlignment&gt;</span>
    <span class="nt">&lt;TextBlock.VerticalAlignment&gt;</span>
        Center
    <span class="nt">&lt;/TextBlock.VerticalAlignment&gt;</span>
<span class="nt">&lt;/TextBlock&gt;</span>
</pre></div>


<p>Here we see that we defined the properties of the <code>TextBlock</code> by creating
another elements for each of them, and on for the Foreground property,
we explicitly defined a <code>SolidColorBrush</code> as the value of the property.
This is entirely optional, we can put the value inside the <code>Foreground</code>
tag and it would still work, just like we did with the other properties.
We don’t need to explicitly create a element of type <code>Double</code> for the
<code>FontSize</code>, nor we need to create another elements for the enumeration of
the alignment properties. We are still relying on the compiler to
actually recognize that the <code>Black</code> inside the tag is actually referring
to the colour enumeration, but there are times where would need to
explicitly define the property with the usual property-attributes
syntax.</p>
<p>In the previous example, we explicitly define what are the properties
and its value, but as we see on most XAML we see, there are many cases
where we don’t do that. For example, we didn’t explicitly define the
<code>rootGrid</code> element of our page is the value for the Content property of
the page, nor we need to explicitly define that our <code>TextBlock</code> is a
member of the <code>Children</code> property of the <code>Grid</code>. This is because every
classes referenced in XAML can have one and only one property that is
defined as its <code>ContentProperty</code>, where for these properties, the property
element tags are not required. So, instead of writing</p>
<div class="highlight"><pre><span class="nt">&lt;Page&gt;</span>
    <span class="nt">&lt;Page.Content&gt;</span>
        <span class="nt">&lt;Grid&gt;</span>
            <span class="nt">&lt;Grid.Children&gt;</span>
                <span class="nt">&lt;TextBlock/&gt;</span>
                <span class="nt">&lt;TextBlock/&gt;</span>
                <span class="nt">&lt;TextBlock/&gt;</span>
            <span class="nt">&lt;/Grid.Children&gt;</span>
        <span class="nt">&lt;/Grid&gt;</span>
    <span class="nt">&lt;/Page.Content&gt;</span>
<span class="nt">&lt;/Page&gt;</span>
</pre></div>


<p>We can simply write:</p>
<div class="highlight"><pre><span class="nt">&lt;Page&gt;</span>
    <span class="nt">&lt;Grid&gt;</span>
        <span class="nt">&lt;TextBlock/&gt;</span>
        <span class="nt">&lt;TextBlock/&gt;</span>
        <span class="nt">&lt;TextBlock/&gt;</span>
    <span class="nt">&lt;/Grid&gt;</span>
<span class="nt">&lt;/Page&gt;</span>
</pre></div>


<p>And it would produce the same result. For the same reason, we can use
the same thing to define the <code>Text</code> property of a <code>TextBlock</code> without
creating property element tag for it, So,</p>
<div class="highlight"><pre><span class="nt">&lt;TextBlock</span> <span class="na">Text=</span><span class="s">&quot;Hello&quot;</span><span class="nt">/&gt;</span>

<span class="c">&lt;!-- Is the same as: --&gt;</span>

<span class="nt">&lt;TextBlock&gt;</span>
    <span class="nt">&lt;TextBlock.Text&gt;</span>
        Hello
    <span class="nt">&lt;/TextBlock.Text&gt;</span>
<span class="nt">&lt;/TextBlock&gt;</span>

<span class="c">&lt;!-- and --&gt;</span>

<span class="nt">&lt;TextBlock&gt;</span>
    Hello
<span class="nt">&lt;/TextBlock&gt;</span>
</pre></div>


<p>I guess thats enough for now. Learning about all this made me realise 
that XAML is a very flexible and powerful language and can
be used for many things that can be done with C#, so knowing it would hopefully
be very useful in developing for the some of the latest Microsoft platforms (Win 8, WP 8, etc).
But of course, it is still a markup language, and it has several limitations, 
such as lack of logic processing, and inability to create instances of objects that requires
parameters in its contructor.</p>
                    </section>
                    <hr/>
                    <aside class="post-meta">
                        <p>Category: <a href="http://hdra.github.io/hndr.me/category/olds.html">olds</a></p>
                                                <p>Tags: <a href="http://hdra.github.io/hndr.me/tag/programming.html">programming</a>, <a href="http://hdra.github.io/hndr.me/tag/xaml.html">xaml</a>, <a href="http://hdra.github.io/hndr.me/tag/c.html">c#</a>, </p>
                                            </aside>
                    <hr/>
                    <div class="comments">
    <div id="disqus_thread"></div>
    <script type="text/javascript">
        var disqus_shortname = 'hndrblog';
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div>
                </article>
            </li>
        </ol>
    </div>
        </div>

        <script>
    var _gaq=[['_setAccount','UA-40075063-1'],['_trackPageview']];
    (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
    g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
    s.parentNode.insertBefore(g,s)}(document,'script'));
</script>
        <script src="http://hdra.github.io/hndr.me/theme/js/main.js"></script>
    </body>
</html>